# 시스템 콜
- 운영체제의 커널이 제공하는 서비스에 대해, 응용 프로그램의 요청에 따라 커널에 접근하기 위한 인터페이스
- 운영체제 서비스를 접근하기 위한 유일한 수단
- 프로그램을 실행하거나 프로그램이 컴퓨터 자원을 사용하기 위해서는 시스템 콜을 통해 커널에 자원 사용을 요청해야 함

#### 시스템 콜의 주요 3가지 기능
1. 유저 모드에 있는 응용 프로그램이 커널의 기능을 사용할 수 있도록 한다.
2. 시스템 호출을 하면 유저 모드에서 커널 모드로 바뀜
3. 커널에서 시스템 호출의 작업이 끝나면 유저 모드로 돌아감

- 유저 모드: 사용자가 프로그램 실행, 코드 작성 등을 하는 상태. 사용자,프로그램이 접근할 수 있는 범위를 두고 범위 내에서 동작
- 커널 모드: 시스템 콜을 처리하는 상태. 컴퓨터의 자원들이 운영체제 제어 하에 동작하며 모든 종류의 명령 사용 가능
하드웨어 내부에 존재하는 Mode bit를 통해 구분. 모든 비트가 0이면 커널모드 1이면 유저 모드


#### open()의 호출
![image](https://github.com/LeeHyogon/cs-/assets/45483116/70efe45c-d63d-4c18-a7d4-fd607bbcfc13)

- open() 시스템 콜의 운영체제 처리 과정은 다음과 같다

필요한 기능이나 시스템 환경에 따라 시스템 콜이 발생할 때 좀 더 많은 정보가 필요할 수 있다. 그러한 정보가 담긴 매개변수를 운영체제에 전달하는 3가지 방법이 있다.

- **매개변수를 CPU 레지스터 내에 전달**
- 위와 같은 경우에 매개변수를 메모리에 저장하고, 메모리의 주소가 레지스터에 전달된다.
- 매개변수는 프로그램에 의해 스택으로 전달 될 수도 있다.
![image](https://github.com/LeeHyogon/cs-/assets/45483116/5d3f258b-a4ec-4cef-8b4f-837ace285dd7)

### 시스템 콜 예시
```
cp in.txt out.txt
```

- 키보드가 사용자로부터 입력을 받을때 I/O 시스템 콜을 사용
- 'cp'프로그램을 실행시키면 'in.txt'파일이 현재 디렉터리에서 접근할 수 있는 파일인지 검사하기 위한 시스템 콜을 호출
- 파일이 존재하지 않는다면 에러 발생시키고 프로그램을 종류하는 데 이때 시스템콜이 사용됨.
- 파일이 존재한다면 ;output.txt'파일명이 있는지 검사하기 위한 시스템 콜을 호출
- 이미 존재한다면 덮어 씌울지, 이어서 붙이는지 User에게 물어볼 수 있다.
![image](https://github.com/LeeHyogon/cs-/assets/45483116/dae5d870-5dac-4f5e-90b0-3fb2f0a1252f)

### 시스템 콜의 종류


#### 프로세스 컨트롤
- 프로세스 생성 및 종료
- 메모리에 로드, 실행
- 프로세스 속성 값 확인, 지정
- wait 이벤트, signal 이벤트
- 메모리 할당
#### 파일 메니지먼트
- 파일 생성, 파일 삭제
- 열기, 닫기
- 읽기, 쓰기, Reposition
- 파일 속성 값 확인, 지정
#### 디바이스 매니지먼트
- 디바이스 요청 및 해제
- 읽기, 쓰기, Reposition
- 디바이스 속성 확인, 지정
- 비 물리적인 디바이스 해제 및 장착
#### 정보 관리
- 시간 확인, 시간 지정
- 시스템 데이터 확인, 지정
- 프로세스, 파일, 디바이스 속성 가져오기
- 프로세스, 파일, 디바이스 속성 설정하기
#### 커뮤니케이션
- 커뮤니케이션 연결 생성 및 삭제
- 메시지 송신, 수신
- 상태 정보 전달
- remote 디바이스 해제 및 장착
#### 보안
- Permission 획득
- Permission 설정


### UNIX System Calls
![image](https://github.com/LeeHyogon/cs-/assets/45483116/e3679923-e213-458c-adb7-61f82efd270c)

ref https://latter2005.tistory.com/43 <br>
ref https://velog.io/@nnnyeong/OS-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%BD%9C-System-Call <br>
ref https://fjvbn2003.tistory.com/306
